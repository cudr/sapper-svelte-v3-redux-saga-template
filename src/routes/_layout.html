<script>
	import { bindAction } from '@store'
	import { counterIncr } from '@ducks/counter'

	export let child;
</script>

<script context="module">
	export async function preload(ctx) {
		if (this.store.isServer) {
			let incr = bindAction(counterIncr)

			await new Promise(r => setTimeout(f => f(), 100, r))

			incr()
		}
	}
</script>

<main>
	<svelte:component this={child.component} {...child.props} />
</main>
